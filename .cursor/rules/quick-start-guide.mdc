---
description: 
globs: 
alwaysApply: false
---
# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª**ä¼ä¸šçº§NestJSæ ·æ¿å·¥ç¨‹**ï¼ŒåŒ…å«äº†ç°ä»£Webåº”ç”¨å¼€å‘çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚å®Œæ•´æ–‡æ¡£è¯·å‚è€ƒ [QUICK_START.md](mdc:docs/QUICK_START.md)ã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- ğŸ—ï¸ **å®Œæ•´åŸºç¡€æ¶æ„** - æ¨¡å—åŒ–è®¾è®¡ã€TypeScriptã€ç¯å¢ƒé…ç½®
- ğŸ—„ï¸ **æ•°æ®åº“é›†æˆ** - TypeORM + MySQLï¼Œè¿ç§»ç®¡ç†ï¼ŒRepositoryæ¨¡å¼
- ğŸ” **è®¤è¯æˆæƒç³»ç»Ÿ** - JWT + RBACæƒé™æ§åˆ¶ï¼Œå®Œæ•´ç”¨æˆ·è§’è‰²ç®¡ç†
- ğŸ›¡ï¸ **å®‰å…¨ä¸­é—´ä»¶** - å¤šå±‚å®‰å…¨é˜²æŠ¤ï¼Œè¯·æ±‚é™æµï¼ŒXSSé˜²æŠ¤
- ğŸ“¡ **APIè®¾è®¡** - Swaggeræ–‡æ¡£ï¼Œç»Ÿä¸€å“åº”æ ¼å¼ï¼Œç‰ˆæœ¬æ§åˆ¶
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - Redisç¼“å­˜ï¼Œæ•°æ®åº“ä¼˜åŒ–ï¼Œæ€§èƒ½ç›‘æ§
- ğŸ”§ **é˜Ÿåˆ—ç³»ç»Ÿ** - Bullé˜Ÿåˆ—ï¼Œå¼‚æ­¥ä»»åŠ¡å¤„ç†
- ğŸ“Š **ç›‘æ§å¥åº·æ£€æŸ¥** - PrometheusæŒ‡æ ‡ï¼Œå¥åº·æ£€æŸ¥ç«¯ç‚¹

## âš¡ å¿«é€Ÿå¯åŠ¨

### 1. ç¯å¢ƒè¦æ±‚

- **Node.js** >= 18.x
- **npm** >= 9.x
- **Docker** >= 20.xï¼ˆæ¨èï¼‰
- **MySQL** >= 8.0
- **Redis** >= 6.x

### 2. é¡¹ç›®åˆå§‹åŒ–

```bash
# å®‰è£…ä¾èµ–
npm install

# å¤åˆ¶ç¯å¢ƒé…ç½®
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰
nano .env
```

### 3. å…³é”®é…ç½®

ç¼–è¾‘ [.env](mdc:.env.example) æ–‡ä»¶ï¼š

```env
# åº”ç”¨é…ç½®
NODE_ENV=development
PORT=3000
APP_NAME=jq-project-template

# æ•°æ®åº“é…ç½® (å¿…é¡»ä¿®æ”¹)
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=your_password
DB_NAME=main

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379

# JWTå¯†é’¥ (ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹)
JWT_SECRET=your-super-secret-key-change-in-production
JWT_REFRESH_SECRET=your-refresh-secret-key-change-in-production
```

### 4. å¯åŠ¨æ–¹å¼

#### ğŸ³ Dockerå¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.dev.yml up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.dev.yml ps

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker-compose -f docker-compose.dev.yml logs -f app
```

#### ğŸ’» æœ¬åœ°å¯åŠ¨

```bash
# å¯åŠ¨æ•°æ®åº“æœåŠ¡ï¼ˆå¦‚æœæœ¬åœ°æ²¡æœ‰ï¼‰
docker-compose -f docker-compose.dev.yml up -d mysql redis

# æ•°æ®åº“è¿ç§»
npm run migration:run

# å¯¼å…¥ç§å­æ•°æ®
npm run seed:auth

# å¯åŠ¨åº”ç”¨
npm run start:dev
```

## ğŸ” éªŒè¯å®‰è£…

è®¿é—®ä»¥ä¸‹åœ°å€ç¡®è®¤æœåŠ¡æ­£å¸¸ï¼š

- **åº”ç”¨ä¸»é¡µ**: http://localhost:3000
- **APIæ–‡æ¡£**: http://localhost:3000/api/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:3000/api/health

## ğŸ” æµ‹è¯•ç™»å½•

### é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·

```bash
ç”¨æˆ·å: admin
å¯†ç : admin123
```

### APIæµ‹è¯•

```bash
# ç™»å½•è·å–token
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# è·å–ç”¨æˆ·åˆ—è¡¨
curl -X GET "http://localhost:3000/api/users" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

## ğŸ› ï¸ å¼€å‘å·¥å…·

### å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
npm run start:dev      # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run start:debug    # å¯åŠ¨è°ƒè¯•æ¨¡å¼

# ä»£ç è´¨é‡
npm run lint           # ä»£ç æ£€æŸ¥
npm run format         # ä»£ç æ ¼å¼åŒ–
npm run test           # è¿è¡Œæµ‹è¯•

# æ•°æ®åº“
npm run migration:run  # æ‰§è¡Œè¿ç§»
npm run seed:auth      # å¯¼å…¥ç§å­æ•°æ®
```

### æ¨èIDEé…ç½®

é¡¹ç›®åŒ…å«VSCodeé…ç½®æ–‡ä»¶ï¼š
- **è°ƒè¯•é…ç½®**: [.vscode/launch.json](mdc:.vscode/launch.json)
- **ä»»åŠ¡é…ç½®**: [.vscode/tasks.json](mdc:.vscode/tasks.json)

## ğŸ“ é¡¹ç›®ç»“æ„å¿«è§ˆ

```
src/
â”œâ”€â”€ modules/           # ä¸šåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ auth/         # è®¤è¯æˆæƒ
â”‚   â”œâ”€â”€ user/         # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ audit/        # å®¡è®¡æ—¥å¿—
â”‚   â”œâ”€â”€ cache/        # ç¼“å­˜ç³»ç»Ÿ
â”‚   â””â”€â”€ queue/        # é˜Ÿåˆ—ç³»ç»Ÿ
â”œâ”€â”€ common/           # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ decorators/   # è£…é¥°å™¨
â”‚   â”œâ”€â”€ dto/          # åŸºç¡€DTO
â”‚   â”œâ”€â”€ guards/       # å®ˆå«
â”‚   â””â”€â”€ interceptors/ # æ‹¦æˆªå™¨
â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
```

## ğŸ¯ å¼€å‘è·¯å¾„

### æ–°å¼€å‘è€…å­¦ä¹ é¡ºåº

1. **ğŸ“– é¡¹ç›®æ¶æ„** - äº†è§£ [é¡¹ç›®æ¶æ„æŒ‡å—](mdc:.cursor/rules/nestjs-architecture.mdc)
2. **ğŸŒ APIè§„èŒƒ** - å­¦ä¹  [APIè°ƒç”¨è§„èŒƒ](mdc:.cursor/rules/api-development-guide.mdc)
3. **âš™ï¸ å¼€å‘æµç¨‹** - æŒæ¡ [å¼€å‘å·¥ä½œæµ](mdc:.cursor/rules/development-workflow.mdc)
4. **â“ é—®é¢˜è§£å†³** - æŸ¥é˜… [FAQæ–‡æ¡£](mdc:docs/FAQ.md)

### äºŒæ¬¡å¼€å‘å¿«é€ŸæŒ‡å¼•

1. **åˆ›å»ºæ–°æ¨¡å—**: å‚è€ƒ [ç”¨æˆ·æ¨¡å—](mdc:src/modules/user) çš„ç»“æ„
2. **APIå¼€å‘**: ä½¿ç”¨ç»Ÿä¸€çš„ DTOã€Serviceã€Controller æ¨¡å¼
3. **æƒé™æ§åˆ¶**: ä½¿ç”¨ `@Auth()` å’Œ `@RequirePermissions()` è£…é¥°å™¨
4. **æ•°æ®åº“æ“ä½œ**: åŸºäº TypeORM Repository æ¨¡å¼

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥æ•°æ®åº“æœåŠ¡
docker-compose -f docker-compose.dev.yml ps mysql

# é‡å¯æ•°æ®åº“
docker-compose -f docker-compose.dev.yml restart mysql
```

**Redisè¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥RedisæœåŠ¡
docker-compose -f docker-compose.dev.yml ps redis

# é‡å¯Redis
docker-compose -f docker-compose.dev.yml restart redis
```

**ç«¯å£å ç”¨**
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :3000

# ä¿®æ”¹ç«¯å£ï¼ˆ.envæ–‡ä»¶ï¼‰
PORT=3001
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# åº”ç”¨æ—¥å¿—
docker-compose -f docker-compose.dev.yml logs -f app

# æ•°æ®åº“æ—¥å¿—
docker-compose -f docker-compose.dev.yml logs -f mysql

# Redisæ—¥å¿—
docker-compose -f docker-compose.dev.yml logs -f redis
```

## ğŸ“š è¿›é˜¶å­¦ä¹ 

### å®Œæˆæ¨¡å—æŠ¥å‘Š

- [è®¤è¯æˆæƒç³»ç»Ÿ](mdc:docs/completed/AUTH_SYSTEM_COMPLETED.md)
- [å®‰å…¨ä¸­é—´ä»¶](mdc:docs/completed/SECURITY_MIDDLEWARE_COMPLETED.md)
- [æ€§èƒ½ä¼˜åŒ–](mdc:docs/completed/PERFORMANCE_OPTIMIZATION_COMPLETED.md)
- [ç›‘æ§å¥åº·æ£€æŸ¥](mdc:docs/completed/MONITORING_HEALTH_COMPLETED.md)

### å¼€å‘æ–‡æ¡£

- [å¼€å‘è§„èŒƒæŒ‡å—](mdc:docs/DEVELOPMENT_GUIDE.md)
- [APIæ–‡æ¡£è¯´æ˜](mdc:docs/API_DOCUMENTATION.md)
- [å¸¸è§é—®é¢˜è§£ç­”](mdc:docs/FAQ.md)

## ğŸ‰ æ­å–œï¼

æ‚¨å·²ç»æˆåŠŸå¯åŠ¨äº†NestJSæ ·æ¿å·¥ç¨‹ï¼ç°åœ¨å¯ä»¥å¼€å§‹æ‚¨çš„å¼€å‘ä¹‹æ—…äº†ã€‚

**ä¸‹ä¸€æ­¥å»ºè®®**ï¼š
1. æµè§ˆAPIæ–‡æ¡£äº†è§£å¯ç”¨æ¥å£
2. æŸ¥çœ‹å·²æœ‰æ¨¡å—çš„å®ç°æ–¹å¼
3. æ ¹æ®éœ€æ±‚å¼€å‘æ–°çš„ä¸šåŠ¡æ¨¡å—
